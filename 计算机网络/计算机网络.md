> 日期：2023-2-1
>
>作者：lyfive

第一章:三种交换方式与时延一起考，性能指标，服务协议实体之间的关系，分层
第二章:什么斯特和香浓的两个公式，不同情况适用范围，码分复用
第三章:链路层三个基本问题，透明传输，循环冗余码，csma协议（理解某场景算法执行过程）
第四章:子网划分，ip地址，地址块构建超网，路由表更新（重点，最短路径，距离下标）
第五章:可靠传输，uzi控制?，拥塞避免，慢开始，tcp连接释放三报文四握手
第六章应用层协议，url，http，邮件协议
第七章和第六章6分左右

## 一、题型

1. 选择题（30分）：单选+多选，单选1分$\times$20、多选2分$\times$5 
2. 简答题（20分）：5分$\times$4
3. 分析计算题（40分）：10分$\times$4
4. 论述题（10分）：10分$\times$1



## 二、核心考点

### 第一章：概述

> 大概2道简答题+1道计算题+2道以上选择题：预计分值24分

1. 互联网的组成：边缘部分（资源子网）和核心部分（通信子网）

2. 互联网边缘部分的通信方式：C/S模式和P2P模式

3. 交换技术

   > 简答题5分-大概率

   1. 电路交换步骤：建立连接（占用通信资源）-> 通话（一直占用通信资源）-> 释放连接（归还通信资源）
      特点：在通话的全部时间内，通话的两个用户始终占用端到端的通信资源；
      用于传送计算机数据时，线路的传输效率往往很低。
   2. 分组交换步骤：把一个报文划分为几个分组后再进行传送。
      优点：在分组传输的过程中动态分配传输带宽，对通信链路逐段占用（高效）、为每一个分组独立地选择最合适的转发路由（灵活）、以分组作为传送单位，不先建立连接就能向其他主机发送分组（迅速）、保证可靠性的网络协议，分布式多路由的分组交换网，使网络有很好的生存性（可靠）
   3. 报文交换步骤：将整个报文直接进行传送。

   电路交换-整个报文的比特流连续地从源点直达终点，好像在一个管道中传送。
   报文交换-整个报文先传送到相邻节点，全部存储下来后查找转发表，转发到下一个节点。
   分组交换-单个分组（报文的一部分）传送到相邻节点，存储下来后查找转发表，转发到下一个节点。
   若要连续传送大量的数据，且其传送时间远大于连接建立时间，则电路交换的传输速率较快。

   报文交换和分组交换不需要预先分配传输带宽，在传送突发数据时可提高整个网络的信道利用率。

   由于一个分组的长度往往远小于整个报文的长度，因此分组交换比报文交换的时延小，同时也具有更好的灵活性。

4. 互联网的两大组成部分的特点是什么？它们的工作方式各有什么特点？

   > 简答题5分-小概率

   1. 边缘部分：由所有连接在互联网上的主机组成。这部分是用户直接使用的，用来进行通信和资源共享。
   2. 核心部分：由大量网络和连接这些网络的路由器组成。这部分是为边缘部分提供服务的。
   3. 在网络边缘的端系统之间的通信方式通常可划分为两大类：客户—服务器方式（C/S方式）和对等方式（p2p方式）。核心部分的工作方式也有两种：一种是路由器转发分组，另一种是路由器之间不断地交换路由信息。

5. 互联网核心部分向边缘部分的大量主机提供**连通性**。互联网是一个**远程分组交换网络**，所以采用的是**分组交换技术**。

   > 简答题5分-大概率

   分组交换的特点主要有：

   1. 节点暂时存储的是一个个分组，而不是整个数据文件。
   2. 分组暂时保存在节点的内存中，保证了较高的交换速率。
   3. 动态分配信道，极打的提高了通信线路的利用率。

   不足主要有：

   1. 分组在节点转发因排队而造成一定的延时
   2. 分组必须携带一些控制信息（首部）而产生额外开销，管理控制比较困难。

6. 计算机网络的定义：由自治的计算机互联起来的集合体。
   书上的定义：计算机网络主要是一些通用的、可编程的硬件互连而成的，而这些硬件并非专门用来实现某一特定目的。这些可编程的硬件能够用来传送多种不同类型的数据，并能支持广泛的和日益增长的应用。

7. 计算机网络的分类：按作用范围（广域网WAN、城域网MAN、局域网LAN、个人区域网PAN等）；按使用者（公用网、专用网）

8. 计算机网络的性能指标：

   > 分析计算题10分-大概率在发送时延和传播时延

   1. 速率：数据的传送速率，也称为数据率或比特率。单位（bit/s或写作b/s、bps）k->M->G->T->P（按1000倍不是1024倍）
   2. 带宽：通道传送数据的能力，表示单位时间内网络中某信道所能通过的“最高数据率”。单位（bit/s）
   3. 吞吐量：表示在单位时间内通过某个网络（或信道、接口）的实际数据量。单位（bit/s）
   4. **时延**：指数据从网络的一端传送到另一端所需的时间。

      > 需要重点掌握各种时延的计算

      - 发送（传输）时延：主机或路由器发送数据帧所需要的时间，从发送数据帧的第一个比特算起，到该帧最后一个比特发送完毕所需的时间。
        $发送时延=\frac{数据帧长度(bit)}{发送速率(bit/s)}$（发送速率一般是信道带宽）
      - 传播时延：电磁波在信道中传播一定的距离需要花费的时间。电磁波在自由空间的传播速率是光速$3.0\times10^5km/s$，在铜线电缆中是$2.3\times10^5km/s$，在光纤是$2.0\times10^5km/s$（常计算）。
        $传播时延=\frac{信道长度(m)}{电磁波在信道上的传播速率(m/s)}$
      - 处理时延：主机或路由器在收到分组时要花费一定的时间进行处理所花费的时间。
      - 排队时延：分组在经过网络传输时，要经过许多路由器，分组在进入路由器后要先在输入队列中排队等待处理的时间。
      - 总时延=发送时延+传播时延+处理时延（一般不处理）+排队时延（一般不处理）
        ![image-20230208195440716](计算机网络.assets/image-20230208195440716.png)

   5. 时延带宽积：$时延带宽积=传播时延(s)\times带宽(bit/s)$ ，又称以比特为单位的链路长度。
      A-B光纤链路，长1km，带宽1Gb/s：$\frac{1km}{2\times10^5km/s}\times1Gb/s=5kb$

   6. **往返时间RTT**：表示从发送端发送数据开始，到发送端收到来自接收端的确认（接收端收到数据后便立即发送确认），总共经历的时延。
      影响因素：链路的传播时间、末端系统的处理时间以及路由器的排队时间。
      RTT的变化主要由路由器的排队时间影响，因此RTT反映了网络拥堵程度的变化。
      $有效数据率=\frac{数据长度(bit)}{发送时间+RTT(s)}$

   7. **利用率**：①信道利用率指出某信道有百分之几的时间是被利用的（有数据通过）②网络利用率是全网络的信道利用率的加权平均值。
      概念解析：信道利用率或网络利用率过高就会产生非常大的时延。（一般控制不超过50%）
      $空闲时延D_0，网络利用率U，则有时延D=\frac{D_0}{1-U}$

9. **OSI七层协议体系结构、TCP/IP四层体系结构和综合的五层体系结构**

   > 简答题5分-小概率；选择题大概率


   ![image-20230206162314314](计算机网络.assets/image-20230206162314314.png)

   1. 应用层：通过应用进程间的交互来完成特定网络应用。应用层交换的数据单元为**报文(message)**
   2. 运输层：负责向两台主机中进程之间的通信提供通用的数据传输服务。有TCP和UDP两种协议。
      - 传输控制协议TCP：提供**面向连接的、可靠的**数据传输服务，其数据传输的单位是**报文段(segment)**。
      - 用户数据报协议UDP：提供**无连接的尽最大努力的**数据传输服务（不保证数据传输的可靠性），其数据传输的单位是**用户数据报**。
   3. 网络层：负责为分组交换网上的不同主机提供通信服务。发送数据时，网络层把运输层产生的报文段或用户数据报封装成**分组或包**进行传送。由于网络层使用IP协议，因此分组也叫做**IP数据报、数据报**。
   4. 数据链路层：将网络层交下来的IP数据报组装成**帧**，在两个相邻节点间的链路上传送帧。传送的单位是**帧**
   5. 物理层：传输比特流数据。单位为**比特**

10. 协议是控制两个对等实体在“水平方向”进行“逻辑通信”的规则的集合。

   > 简答题5分-大概率

   协议的三要素

   - 语法：定义所交换信息的格式
   - 语义：定义通信双方所要完成的操作
   - 同步：定义通信双方的时序关系

   协议与服务的区别：①协议是“水平”的，即控制对等实体之间通信的规则；服务是“垂直”的，即服务是由下层向上层通过间接口提供的。
   ②实体看得见下层提供的服务，但并不知道实现该服务的具体协议。下层的协议对上层的实体是“透明”的。



### 第二章：物理层

> 大概1道计算题+2道以上选择题+最多1道简答题：预计分值14分

1. **物理层的主要任务**就是确定与传输媒体的接口有关的一些特性。

   > 选择题2分-大概率；简答题感觉不可能

   - 机械特性：指明接口所用接线器的形状和尺寸、引脚数目和排列、固定和锁定装置等。
   - 电气特性：指明在接口电缆的各条线上出现的电压的范围。
   - 功能特性：指明某条线上出现的某一电平的电压的意义。
   - 过程特性：指明对于不同功能的各种可能事件的出现顺序。

2. 通信双方信息交互的**主要方式**

   > 选择题2分-中概率

   - 单向通信：又称为单工通信，即只能有一个方向的通信而没有反方向的交互。如无线电广播或有线电广播以及电视广播
   - 双向交替通信：又称为半双工通信，即通信的双方都可以发送信息，但不能双方同时发送（接收）。这种通信方式是一方发送另一方接收。
   - 双向同时通信：又称为全双工通信，即通信的双方可以同时发送和接收信息。
     单向通信只需要一条信道，双向交替、双向同时通信需要两条。双向同时通信的传输效率最高。

3. 比特速率和码元速率

   - QAM：又称正交双边带调制。在多电平时，就构成了多进制正交幅度调制（MQAM）
   - 基本公式（数据通信的）：
     - M：代表M星点数，M值越大，星点数越多、频带利用率就越高、星点的空间距离越小、系统的抗干扰能力下降、误码率越高。
     - **电平数**：$n = \sqrt{M}$（n电平代表n进制），在**计算机网络**里$若有X个相位，Y种振幅，则n=XY$
     - **码元比特数**：$k=log_2n=log_2\sqrt{M}=\frac{1}{2}log_2M，k=log_2n=log_2XY$
     - **码元速率（调制速率）**：$f_s$
     - **带宽**：$B$
   - 码元速率与比特速率：$f_b=f_slog_2n=kf_s$，即一个码元由k个比特组成，比特速率就是码元速率的k倍

4. 信道的极限速率

   > 选择题2分-大概率

   - 影响信道最大传输速率的**因素**：①信道能够通过的频率范围②信噪比
   - 奈氏准则：在带宽为W(Hz)的低通信道中，若不考虑噪声影响，则码元传输的最高速率是2W（码元/秒）。
   - $信噪比(dB) = 10log_{10}(\frac{S}{N})$，S/N即信号的平均功率和噪声的平均功率之比
   - 香农公式：$设带宽为W，信噪比为S/N，信道的极限信息传输速率C=Wlog_2(1+\frac{S}{N})(bit/s)$。
   - **需要注意2W单位是码元/秒，香农公式是bit/s**
     若链路带宽为3kHz，采用4个相位、每个相位有4种振幅的QAM调制，则链路的最大传输速率
     $f_s=2W=6k(码元/秒)，n=4*4，故f_b=f_s*log_2n=6k*4=24kbit/s$
   - **香农公式的意义**：告诫工程人员，在有噪声的实际信道上，不论采用多么复杂的编码技术，都不可能突破公式给出的信息传输速率的绝对极限。

5. 常用的**信道利用技术**

   > 简答题5分-中概率

   - 频分复用：在同样的时间占用不同的带宽资源（这里的带宽指频率带宽）。如有N路信号要在一个信道中传送，可以使用调制的方法，把各路信号分别搬移到适当的频率位置，使彼此不产生干扰。
   - 时分复用：所有用户在不同的时间占用同样的频带宽度。是将时间划分为一段段等长的时分复用帧（即TDM帧）。每一路信号在每一个TDM帧中占用固定序号的时隙。（时分复用更利于数字信号的传输）
   - 统计时分复用：使用STDM帧来传送复用的数据，根据用户实际需要动态分配时长。（可能会有间隙）
   - 波分复用：光的频分复用。
   - **码分复用：**将每个比特时间划分为m个更短的时间片，称为码片（m通常取值为64/128），每个站点都被指派一个唯一的m比特码片序列。若某个站要发送比特1，则发送它自己的m比特码片序列；若要发送0，则发送它自己的m比特码片序列的反码。

6. 码分复用计算
   
   > 分析计算题10分-大概率

   发送原理：向量叠加，发送A+B+C...（向量加法）
   ![image-20230208000156136](计算机网络.assets/image-20230208000156136.png)

   接收原理：向量积，即根据码片划分任意两个码片向量一定在m维空间“垂直”即向量积为0。（即要求$\vec{B} \neq -\vec{A}$
   接收$(A+B+C...)A=AA+BA+CA+...=AA=|A|$
   
   接收$(-A+B+C...)A=-AA+BA+CA+...=-AA=-|A|$![image-20230207235926406](计算机网络.assets/image-20230207235926406.png)
   ![image-20230208000851854](计算机网络.assets/image-20230208000851854.png)



### 第三章：数据链路层

> 大概简答题5分+选择题8分以上，大概13分。
>
> 还需了解Mac地址48bits和CSMA/CD协议。核心在于选择题常识

1. 数据链路层的功能：在两个网络实体之间提供数据链路连接的创建、维持和释放管理。数据链路提供的是一种无连接的最大努力交付的服务，即**无连接不可靠**的服务。
2. 数据链路层的三个基本问题（原因、解决方法）
   
   > 简答题5分-大概率
   
   - 封装成帧：封装成帧就是在一段数据前后分别添加首部和尾部。接收端以便从收到的比特流中识别帧的开始与结束，**帧定界是分组交换的必然要求**。
     使用特殊的帧定界符，控制字符SOH（0x01）放在一帧的最前面，表示帧的首部开始；另一外控制字符EOT（0x04）表示帧的结束。
   - 透明传输：透明传输避免消息符号与帧定界符号相混淆。（透明：某一个实际存在的事物看起来却好像不存在）
     当发送数据出现帧定界符SOH或EOT，则在SOH、EOT前插入一个转义字符“ESC”（0x1B），当数据出现转义字符同样在“ESC”前添加一个ESC。当接收端收到连续的两个转义字符时，就删除其中前面的一个。
   - 差错检测：差错检测防止差错的无效数据帧，浪费网络资源。
     使用循环冗余检测CRC
3. CRC的计算和理解
   
   > 选择题2分-大概率；计算题基本不可能
   
   - 构造冗余码：对于传送的数据M，首先用二进制的模2运算（相当于除法相减时每一位进行异或）进行$2^n$乘M的运算，相当于在M后添加n个0。再使用$2^nM$除以事先规定长度为n+1位的除数P，最终得到n位的余数R作为冗余码添加在M后。此时MR被称为帧检测序列FCS。
     ![img](计算机网络.assets/v2-89e5f57764d1927a24cdc43d58cf7ff7_1440w.jpeg)
   - CRC检测：除数P，用P(X)多项式表示。如P=1101，则$P(X)=X^3+X^2+1$。在接收到帧数据后，对每个帧再进行模2运算除以P，得到余数R。若R=0，则判定这个帧没有差错，否则则判定这个帧出现差错（但无法修正）。
     ![image-20230208204450984](计算机网络.assets/image-20230208204450984.png)
4. 数据链路层使用的两种信道及对应协议
   - 点对点信道：使用一对一的点对点通信方式，使用点对点协议PPP。
   - 广播信道：使用一对多的广播通信释放，使用专用的共享信道协议CSMA/CD协议。
5. 同步传输和异步传输的区别
   
   > 选择题2分-中概率
   
   1. 异步传输面向字符的传输，传输单位为字符（8bit）。同步传输时面向比特的传输，传输单位是帧（大小不固定）。
   2. 异步传输通过字符的开始码和停止码抓住再同步的机会，而同步传输则是从前同步码中抽取同步信息。
   3. 异步传输每个字符中要多传递2比特信息，总传输负责量增加不少，传输效率比同步传输效率低。异步传输对于那些数据传输量的高速设备而言，增加了不少传输率。因此，适合用于传输量较小的低速设备。



### 第四章：网络层

> 内容巨多，但大概率是选择题分值很高大概6分以上+简答题5分+大概率计算题20分，约31分
>
> 需要防止UDP首部头再出10分背刺

#### 1. 为什么需要网络层

对于互联网而言，仅实现数据链路层和物理层不能实现数据报在互联网中各网络之间传输。网络层的主要任务是实现网络互联，进而实现数据包在各网络之间的传输。

#### 2. 网络的主要功能有哪些

数据通信、资源共享、分布式处理

#### 3. 网络层有哪些协议

IP协议（网际协议），ICMP协议（Internet互联网控制报文协议）以及IGMP协议（Internet组管理协议）

#### 4. 网络层向上提供的服务有哪两种？它们有什么区别？

![image-20230209203734843](计算机网络.assets/image-20230209203734843.png)

#### 5. TCP/IP特点

基于TCP/IP体系结构的因特网的网际层提供的是**简单灵活、无连接的、尽最大努力交付**的数据报服务。

#### 6. 什么是直接交付和间接交付？它们分别用在什么场合？

> 选择题1分-大概率

- 直接交付：发送站与目的站在同一网段内，不涉及路由器。机器在同一网络上。
- 间接交付：发送站与目的站不在同一网段内，间接交付的最后一个路由器肯定是直接交付。机器不在用一网络上。

#### 7. 分类编址的IPv4地址

![image-20230209204224568](计算机网络.assets/image-20230209204224568.png)

#### 8. 各类地址包含的网络数和主机数

> 选择题2分-大概率

![image-20230209204722074](计算机网络.assets/image-20230209204722074.png)
![image-20230209204927534](计算机网络.assets/image-20230209204927534.png)
![image-20230209205204164](计算机网络.assets/image-20230209205204164.png)
![image-20230209205414403](计算机网络.assets/image-20230209205414403.png)
![image-20230209205547781](计算机网络.assets/image-20230209205547781.png)

#### 9. 划分子网

>习题4-33
>
>联合地址分类出例题一样的分析计算题10分-大概率

![image-20230209213110661](计算机网络.assets/image-20230209213110661.png)
![image-20230209213209359](计算机网络.assets/image-20230209213209359.png)

#### 10. 无分类编制、CIDR构造超网

> 习题4-25/26
>
> 选择题大概率1分

![image-20230209213816523](计算机网络.assets/image-20230209213816523.png)
![image-20230209214105650](计算机网络.assets/image-20230209214105650.png)
![image-20230209214627629](计算机网络.assets/image-20230209214627629.png)



#### 11. 互联网路由选择协议

内部网关协议（RIP、OSPF）；外部网关协议（BGP-3）

#### 12. RIP协议

>会写更新路由表
>
>计算题10分-大概率

![image-20230210151634507](计算机网络.assets/image-20230210151634507.png)
![image-20230210151814452](计算机网络.assets/image-20230210151814452.png)
![image-20230210152340731](计算机网络.assets/image-20230210152340731.png)

- 例题
  ![image-20230210152409955](计算机网络.assets/image-20230210152409955.png)
- 答案
  ![image-20230210152426508](计算机网络.assets/image-20230210152426508.png)
- 例题二：距离16代表不可达
  ![image-20230210152659079](计算机网络.assets/image-20230210152659079.png)
- 例题三：“坏消息传的慢”问题
  ![image-20230210153851719](计算机网络.assets/image-20230210153851719.png)

#### 13. IP数据报的格式

> 中概率出计算题10分（需记住重要字段的位置，参考潇湘出题考UDP），大概率出选择题2分

![image-20230210170631964](计算机网络.assets/image-20230210170631964.png)

1. 版本字段
   ![image-20230210170726304](计算机网络.assets/image-20230210170726304.png)

2. **首部长度字段**
   ![image-20230210170926075](计算机网络.assets/image-20230210170926075.png)

3. 可选字段

   ![image-20230210171008451](计算机网络.assets/image-20230210171008451.png)

4. **填充字段**
   ![image-20230210171051052](计算机网络.assets/image-20230210171051052.png)

5. 区分服务字段
   ![image-20230210171223255](计算机网络.assets/image-20230210171223255.png)

6. **总长度字段**
   ![image-20230210171509007](计算机网络.assets/image-20230210171509007.png)

7. **标识、标志和片偏移字段**

   > 和分片相关，非常重要

   ![image-20230210171842541](计算机网络.assets/image-20230210171842541.png)

   - 分片例一
     ![image-20230210172240911](计算机网络.assets/image-20230210172240911.png)
   - 分片例二
     一个数据报长度为4000字节（固定首部长度）。现在经过一个网关传送，但此网络能够传送的最大数据长度为1500字节。试问应当划分为几个短些的数据报片？各数据报片的数据字段长度、片偏移字段和MF标志应为何数值？
     ![image-20230210172354891](计算机网络.assets/image-20230210172354891.png)

8. 生存时间TTL
   ![image-20230210173723763](计算机网络.assets/image-20230210173723763.png)
   TTL作用：防止IP数据报在网络中永久兜圈。

9. **协议字段**

   > 需要了解常见的几个协议的字段值。如：ICMP 1，TCP 6，UDP 17

   ![image-20230210174008573](计算机网络.assets/image-20230210174008573.png)

10. 首部检验和字段
    ![image-20230210174144634](计算机网络.assets/image-20230210174144634.png)

11. 源地址和目标地址IP字段
    ![image-20230210174318657](计算机网络.assets/image-20230210174318657.png)

#### 14. 常见的ICMP报文类型

| ICMP报文种类 | 类型的值 |     ICMP报文的类型     | 例子                                                         |
| :----------: | :------: | :--------------------: | :----------------------------------------------------------- |
| 差错报告报文 |    3     |       终点不可达       | 路由器或主机不能交付数据报                                   |
|              |    4     |        源点抑制        | 路由器或主机由于堵塞而丢弃数据报                             |
|              |    11    |        时间超过        | 报文经过路由器时TTL减去1，当TTL为0时                         |
|              |    12    |        参数问题        | 路由器或目的主机收到IP数据报，首部的检验和字段出现误码       |
|              |    5     |        改变路由        | 路由器把改变路由报文发送给主机，让主机调整发送给另外的路由器 |
|   询问报文   |   8或0   |   回送请求或回送回答   | 测试目的站是否可达（PING程序）                               |
|              |  13或14  | 时间戳请求或时间戳回答 | 进行时钟同步和测量时间（traceroute程序）                     |

- 例题：
  ![image-20230210202203167](计算机网络.assets/image-20230210202203167.png)

#### 15. IP-ARP-MAC

![image-20230210205405033](计算机网络.assets/image-20230210205405033.png)

#### 16. IGMP基本原理
![image-20230210205843817](计算机网络.assets/image-20230210205843817.png)
![image-20230210210422003](计算机网络.assets/image-20230210210422003.png)

#### 17. IPv4过渡到IPv6的方法

> 讨论题/简答题5分大概率

![image-20230210202520072](计算机网络.assets/image-20230210202520072.png)

#### 18. VPN技术
![image-20230210203314523](计算机网络.assets/image-20230210203314523.png)

#### 19. NAT技术
![image-20230210203937901](计算机网络.assets/image-20230210203937901.png)
![image-20230210204006976](计算机网络.assets/image-20230210204006976.png)
![image-20230210204038772](计算机网络.assets/image-20230210204038772.png)
![image-20230210204141313](计算机网络.assets/image-20230210204141313.png)



### 第五章：运输层

> 可出的大部分是选择题计算大概6分+中概率出一个三握手或四挥手简答5分

1. 为什么需要运输层？运输层的主要功能哪些？
   （1）运输层向它上面的应用层提供通信服务，属于面向通信部分的最高层，同时也是用户功能中的最底层。网络层为主机之间提供逻辑通信，运输层为应用进程之间提供端到端的逻辑通信。此外，运输层还向高层用户屏蔽了下面网络核心的细节。
   （2）对一个进行的对话或连接提供可靠的传输服务；在通向网络的单一物理连接上实现该连接的复用；在单一连接上提供端到端的序号与流量控制、差错控制及恢复等服务

2. UDP和TCP的特点和区别

   > 简答题中概率5分

   - UDP的特点
     1. UDP是无连接的，即发送数据之前不需要建立连接。
     2. UDP使用尽最大努力交付，即不保证可靠交付。
     3. UDP是面向报文的。发送方的UDP对应用程序交下来的报文，在添加首部后就向下交付IP层。
     4. UDP没有拥塞控制，因此网络出现的拥塞不会使源主机的发送速率降低。
     5. UDP支持一对一、一对多、多对一和多对多的交互通信。
     6. UDP的首部开销小，只有8个字节，比TCP的20个字节的首部要短。
   - TCP的特点
     1. TCP是面向连接的运输层协议。
     2. 每一条TCP连接只能有两个端点，每一条TCP连接只能是点对点的（一对一的）。
     3. TCP提供可靠交付的服务。通过TCP连接传送的数据，无差错、不丢失、不重复，并且按序到达。
     4. TCP提供全双工通信。TCP运行通信双方的应用进程在任何时候都能发送数据。
     5. 面向字节流。TCP中的“流”指的是流入到进程或从进程流出的字节序列。

3. TCP的拥塞控制
   
   > 选择题1分-大概率
   
   ![image-20230211144246206](计算机网络.assets/image-20230211144246206.png)
   
   - 例题
     ![image-20230210223542796](计算机网络.assets/image-20230210223542796.png)
     ![image-20230211152153200](计算机网络.assets/image-20230211152153200.png)
   
4. 可靠传输原理（停止等待协议；连续ARQ协议）

   > 了解滑动窗口，做完习题5-18

   停止等待协议可以看成是连续ARQ协议的特殊情况，发送窗口和接收窗口值都为1的情况，且只需要1比特给报文段编号即可。

   - 例题一：
   ![image-20230210222120431](计算机网络.assets/image-20230210222120431.png)

5. TCP连接建立

   > 简答题5分大概率

   1. 初始时：两端都处于CLOSED状态，然后服务器打开TCP服务进入LISTEN状态，监听特定端口，等待客户端的TCP请求。
   2. 第一次握手：客户端主动打开连接，发送TCP报文，进行第一次握手，然后进入SYN_SEND状态，等待服务器发回确认报文。
        首部同步位**SYN=1**，同时初始化一个序号**seq=x**，TCP规定 SYN报文段不能携带数据，但会消耗一个序号。
   3. 第二次握手：服务端收到SYN报文，如果同意建立连接，则向客户端发送一个确认报文，然后服务器进入SYN_RCVD状态。
        这时首部的同步位**SYN=1**，确认位**ACK=1**，确认号字段**ack=x+1**，同时初始化一个序号**seq=y**。同样规定不携带数据，消耗一个序号。
   4. 第三次握手：客户端收到服务器发送过来的确认报文，还要向服务器给出确认，然后进入ESTABLISHED状态。此时首部**SYN不再置1**，而**ACK=1**，确认号字段**ack=y+1**，序号**seq=x+1**。
        第三次握手，一般会携带真正需要传输的数据，当服务器收到该数据报文的时候，就会同样进入ESTABLISHED状态。此时，TCP连接已经建立。  	

   对于建立连接的三次握手，主要目的是初始化序号seq，并且通信的双方都需要告知对方自己的初始化序号，所以这个过程也叫SYN。这个序号要作为以后的数据通信的序号，以保证应用层接收到的数据不会因为网络上的传输问题而乱序，因为TCP会用这个序号来拼接数据。
   **为什么需要三报文握手？**
   **为了防止已失效的连接请求报文段突然又传送到了服务器，因而产生错误。**
   A第一次发出请求未收到，第二次发送到达了B并建立了连接。若A发出的第一个连接请求报文段并没有丢失，而是在某些网络节点长时间滞留，以致延误到连接释放以后的某个时间才到达B。此时B收到此失效的连接请求报文后，误以为A又发出一次新的连接请求。于是就向A发出确认报文段，同意建立连接。假定不采用报文握手，那么只要B发出确认，新的连接就建立了。
   由于A并没有发出建立连接的请求，因此不会理睬B的确认，也不会向B发送发送数据。但B却以为新的运输连接已经建立了，并一直等待A发来数据。导致B的许多资源白白浪费了。
   而采用三报文握手，可以防止上述现象的发生。
     ![image-20230211161652680](计算机网络.assets/image-20230211161652680.png)

6. TCP连接释放

   1. 结束前：通信双方都处于ESTABLISHED状态，然后其中一方主动断开连接。假设客户端先主动断开连接。
   2. 第一次挥手：客户端向服务器发送结束报文段，然后进入FIN_WAIT_1状态。
      此报文段终止位**FIN=1**，确认位**ACK=1**，序号**seq=u**等于之前已传送过的最后一个字节序号+1，确认号**ack=v**等于客户进程已收到最后一个数据的序号+1。FIN=1报文不能携带数据。
   3. 第二次挥手：服务端收到客户端发送结束报文段，进入CLOSE_WAIT状态。然后发送结束报文段，此报文段**FIN=1**，确认位**ACK=1**，序号**seq=v**，确认号**ack=u+1**。此时TCP处于半关闭状态，客户端无数据发送，服务器还可以发送数据。客户端接受结束报文后进入FIN_WAIT_2状态。
   4. 第三次挥手：数据传输完服务器再向客户端发送结束报文段，然后进入LAST_ACK状态。此报文段终止位**FIN=1**，确认位**ACK=1**，序号**seq=w**此w为服务器数据传输后的序号比u大，确认号**ack=u+1**。
   5. 第四次挥手：客户端收到服务器的结束报文段，然后发送确认报文段，并进入TIME_WAIT状态，经过2MSL之后，自动进入CLOSED状态。此报文段确认位**ACK=1**，序号**seq=u+1**，确认号**ack=w+1**。服务端收到该报文之后，进入CLOSED状态。
      ![image-20230211164849487](计算机网络.assets/image-20230211164849487.png)

   **为什么需要等待2MSL才释放连接？**
   MSL叫做最长报文段寿命，RFC793建议为2分钟（一般可能不是这个值）。
   **第一，为了保证客户端发送的最后一个ACK报文段能够到达服务器。**
   **第二，防止“已失效的连接请求报文段”出现在本连接中。**

7. TCP报文段的首部格式
   ![image-20230211170046192](计算机网络.assets/image-20230211170046192.png)
   1. 源端口和目的端口
      ![image-20230211170108343](计算机网络.assets/image-20230211170108343.png)
   2. 序号
      ![image-20230211170247481](计算机网络.assets/image-20230211170247481.png)
   3. 确认号
      ![image-20230211170318086](计算机网络.assets/image-20230211170318086.png)
   4. 确认标志位ACK
      ![image-20230211170345201](计算机网络.assets/image-20230211170345201.png)
   5. 数据偏移
      ![image-20230211170429679](计算机网络.assets/image-20230211170429679.png)
   6. 保留位
      ![image-20230211171150353](计算机网络.assets/image-20230211171150353.png)
   7. 窗口
       ![image-20230211171340046](计算机网络.assets/image-20230211171340046.png)
   8. 校验和
      ![image-20230211171411777](计算机网络.assets/image-20230211171411777.png)
   9. 同步标志位SYN
      ![image-20230211171449051](计算机网络.assets/image-20230211171449051.png)
   10. 终止标志位FIN
       ![image-20230211171520604](计算机网络.assets/image-20230211171520604.png)
   11. 复位标志位RST
       ![image-20230211171542641](计算机网络.assets/image-20230211171542641.png)
   12. 推送标志位PSH
       ![image-20230211172028009](计算机网络.assets/image-20230211172028009.png)
   13. 紧急标志位URG和紧急指针
       ![image-20230211171708730](计算机网络.assets/image-20230211171708730.png)
   14. 选项
       ![image-20230211171852092](计算机网络.assets/image-20230211171852092.png)



### 第六章：应用层

> 基本都是需要了解的计算机常识，选择题6分+

1. 应用层的具体内容：精确定义应用进程之间的通信规则。

2. 域名系统DNS：将域名映射为IP地址。

   mail.cctv.com -> 三级域名.二级域名.顶级域名
   多级域名：

   1. 国际顶级域名nTLD，表示国家地域。如：cn表示中国，us表示美国，uk表示英国
   2. 通用顶级域名gTLD，表示通用顶级域名。如：最先7个com（公司企业），net（网络服务机构），org（非营利组织）、int（国际组织）、edu（教育机构）、gov（政府部门）、mil（军事部门）和后续13个
   3. 基础结构域名，只有一个arpa，用于反向域名解析，又称反向域名
   4. 新顶级域名gTLD：使企业域名有显著的、强烈的标志特性。

   **四种域名服务器：**

   1. 根域名服务器：最高层次的域名服务器，所有的根域名服务器知道所有的顶级域名服务器的域名和IP地址。
   2. 顶级域名服务器（TLD服务器）：管理顶级域名服务器注册的二级域名
   3. 权限域名服务器：负责一个区的域名服务器。
   4. 本地域名服务器：当前地域（如大学）的域名服务器。

   **DNS查询方式：**

   1. 递归查询
   2. 迭代查询
   3. 非递归查询

3. FTP文件传送协议：一个FTP服务器进程可同时为多个客户进程提供服务。FTP有**一个主进程**负责接受新的请求，另外有**若干个从属进程**，负责处理单个请求、

   - 主进程端口：21
   - FTP的客户和服务器建立两个并行的TCP连接：**“控制连接”、“数据连接”**
   - 数据连接：用于传输文件使用20端口
   - FTP使用**分离的控制连接**，故它的控制信息是**带外传送**的。

4. TFTP简单文件传送协议

   - 使用UDP协议
   - 默认端口69
   - UDP不可靠，但使用类似停止等待协议方式保证传送文件正常。

5. TELNET远程终端协议

   - 用户能透明的控制远地主机，又称为**终端仿真协议**
   - 客户端把用户的击键和命令转换成NVT格式，交送给服务器；
     服务器软件把收到的数据和命令从NVT格式转换成远地系统所需的格式。
     向用户返回数据时，服务器把远地系统的格式转换为NVT格式；本地客户再从NVT格式转换到本地系统所需的格式。
   - NVT格式：所有的通信都使用8位一字节。运转时，NVT使用7位ASCII码传送数据，而当**高位置1时用作控制命令**。NVT还定义了两字符的CR-LF为标准的行结束控制符。当用户键入回车时，TELNET的客户就把它转换为CR-LF再进行传输。

6. WWW万维网

   1. 链接：链接到另外一个站点
   2. URL：统一资源定位符，用来表示从互联网上得到资源位置和访问这些资源的方法。
      格式：协议://主机名:端口/路径 （端口通常省略）
   3. HTTP：超文本传送协议，面向事务的应用层协议，能够可靠地交换文件。HTTP使用TCP连接。

7. EMAL

   1. 发邮件SMTP协议
   2. 收邮件POP3/IMAP协议
   3. 通用互联网邮件扩充MIME：可同时传送多种类型的数据。
   4. DNS崩溃了EMAL基本也能使用

8. DHCP动态主机配置协议
   提供即插即用联网，允许一台计算机加入新的网络和获取IP地址而不用手工参与。
   一个特性就是DHCP会尽量分配一个和上一次一样的IP，每个IP都有一个租用期。

9. 网络编程
   ![image-20230211193338006](计算机网络.assets/image-20230211193338006.png)

10. P2P

    1. 分布式科学计算
    2. 文件共享
    3. 流媒体直播
